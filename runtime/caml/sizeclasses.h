/* This file is generated by tools/gen_sizeclasses.ml */
#ifndef CAML_SIZECLASSES_H
#define CAML_SIZECLASSES_H

#include <assert.h>
#include <limits.h>
#include "mlvalues.h"

#define POOL_WSIZE 4096
#define POOL_HEADER_WSIZE 4
#define SIZECLASS_MAX 128
#define NUM_SIZECLASSES 32

typedef unsigned char sizeclass;
static_assert(NUM_SIZECLASSES < (1 << (CHAR_BIT * sizeof(sizeclass))), "");

/* The slot sizes (and therefore the largest whsize) for each size class.
   (A gap is left after smaller objects) */
static const mlsize_t whsize_sizeclass[NUM_SIZECLASSES] =
{ /*  0:*/ 1, 2, 3, 4, 5,
  /*  5:*/ 6, 7, 8, 10, 12,
  /* 10:*/ 14, 16, 17, 19, 22,
  /* 15:*/ 25, 28, 32, 33, 37,
  /* 20:*/ 42, 47, 53, 59, 65,
  /* 25:*/ 73, 81, 89, 99, 108,
  /* 30:*/ 118, 128 };

/* The number of padding words to use, at the beginning of a pool
   of each sizeclass, to reach exactly POOL_WSIZE words. */
static const unsigned char padding_sizeclass[NUM_SIZECLASSES] =
{ /*  0:*/ 0, 0, 0, 0, 2,
  /*  5:*/ 0, 4, 4, 2, 0,
  /* 10:*/ 4, 12, 12, 7, 0,
  /* 15:*/ 17, 4, 28, 0, 22,
  /* 20:*/ 18, 3, 11, 21, 62,
  /* 25:*/ 4, 42, 87, 33, 96,
  /* 30:*/ 80, 124 };

/* The size class (index into whsize_sizeclass) for each
   whsize from 0 to SIZECLASS_MAX. Dummy value 255 at index 0. */
static const sizeclass sizeclass_whsize[SIZECLASS_MAX + 1] =
{ /*  0:*/ 255, 0, 1, 2, 3,
  /*  5:*/ 4, 5, 6, 7, 8,
  /* 10:*/ 8, 9, 9, 10, 10,
  /* 15:*/ 11, 11, 12, 13, 13,
  /* 20:*/ 14, 14, 14, 15, 15,
  /* 25:*/ 15, 16, 16, 16, 17,
  /* 30:*/ 17, 17, 17, 18, 19,
  /* 35:*/ 19, 19, 19, 20, 20,
  /* 40:*/ 20, 20, 20, 21, 21,
  /* 45:*/ 21, 21, 21, 22, 22,
  /* 50:*/ 22, 22, 22, 22, 23,
  /* 55:*/ 23, 23, 23, 23, 23,
  /* 60:*/ 24, 24, 24, 24, 24,
  /* 65:*/ 24, 25, 25, 25, 25,
  /* 70:*/ 25, 25, 25, 25, 26,
  /* 75:*/ 26, 26, 26, 26, 26,
  /* 80:*/ 26, 26, 27, 27, 27,
  /* 85:*/ 27, 27, 27, 27, 27,
  /* 90:*/ 28, 28, 28, 28, 28,
  /* 95:*/ 28, 28, 28, 28, 28,
  /*100:*/ 29, 29, 29, 29, 29,
  /*105:*/ 29, 29, 29, 29, 30,
  /*110:*/ 30, 30, 30, 30, 30,
  /*115:*/ 30, 30, 30, 30, 31,
  /*120:*/ 31, 31, 31, 31, 31,
  /*125:*/ 31, 31, 31, 31 };

/* The number of free words left in the slot after a block of each whsize from
   0 to SIZECLASS_MAX. Dummy value 255 at index 0. */
static const mlsize_t wfrag_whsize[SIZECLASS_MAX + 1] =
{ /*  0:*/ 255, 0, 0, 0, 0,
  /*  5:*/ 0, 0, 0, 0, 1,
  /* 10:*/ 0, 1, 0, 1, 0,
  /* 15:*/ 1, 0, 0, 1, 0,
  /* 20:*/ 2, 1, 0, 2, 1,
  /* 25:*/ 0, 2, 1, 0, 3,
  /* 30:*/ 2, 1, 0, 0, 3,
  /* 35:*/ 2, 1, 0, 4, 3,
  /* 40:*/ 2, 1, 0, 4, 3,
  /* 45:*/ 2, 1, 0, 5, 4,
  /* 50:*/ 3, 2, 1, 0, 5,
  /* 55:*/ 4, 3, 2, 1, 0,
  /* 60:*/ 5, 4, 3, 2, 1,
  /* 65:*/ 0, 7, 6, 5, 4,
  /* 70:*/ 3, 2, 1, 0, 7,
  /* 75:*/ 6, 5, 4, 3, 2,
  /* 80:*/ 1, 0, 7, 6, 5,
  /* 85:*/ 4, 3, 2, 1, 0,
  /* 90:*/ 9, 8, 7, 6, 5,
  /* 95:*/ 4, 3, 2, 1, 0,
  /*100:*/ 8, 7, 6, 5, 4,
  /*105:*/ 3, 2, 1, 0, 9,
  /*110:*/ 8, 7, 6, 5, 4,
  /*115:*/ 3, 2, 1, 0, 9,
  /*120:*/ 8, 7, 6, 5, 4,
  /*125:*/ 3, 2, 1, 0 };

#endif /* CAML_SIZECLASSES_H */
